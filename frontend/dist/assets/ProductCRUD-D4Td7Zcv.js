import{c as w,j as e,a as N,r as c,b as j,d as v,e as P,P as L}from"./index-BHP7NIO3.js";import{X as A}from"./x-SH2N5G9R.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=w("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=w("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=w("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=w("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),x=({label:d,name:m,type:a="text",value:i,onChange:u,spring:s,className:h=""})=>{const b=a==="textarea",r=b?"textarea":"input";return e.jsxs(N.div,{style:s,className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:d}),e.jsx(r,{type:a,name:m,value:i,onChange:u,className:`w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 ${b?"min-h-[100px] resize-none":""} ${h}`})]})},$=({images:d,onRemove:m,imageSpring:a})=>e.jsx(N.div,{style:a,className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:d.map((i,u)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:i,alt:`Preview ${u+1}`,className:"w-full h-48 object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-[1.02]"}),e.jsx("button",{onClick:()=>m(u),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx(A,{size:16})})]},u))}),G=({onClose:d,onProductAdded:m})=>{const[a,i]=c.useState({name:"",price:"",ageGroup:"",color:"",description:"",itemsIncluded:"",features:"",benefits:"",quantity:"",image:[]}),u=j({from:{opacity:0,transform:"scale(0.9)"},to:{opacity:1,transform:"scale(1)"},config:v.gentle}),s=j({from:{opacity:0,transform:"translateY(20px)"},to:{opacity:1,transform:"translateY(0)"},delay:200,config:v.gentle}),h=j({from:{opacity:0,transform:"translateY(20px)"},to:{opacity:1,transform:"translateY(0)"},delay:400,config:v.gentle}),b=j({from:{opacity:0,transform:"translateY(20px)"},to:{opacity:1,transform:"translateY(0)"},delay:600,config:v.gentle}),r=n=>{const{name:g,value:l}=n.target;i(o=>({...o,[g]:l}))},y=n=>{i(g=>({...g,image:g.image.filter((l,o)=>o!==n)}))},f=n=>{const l=Array.from(n.target.files).map(o=>URL.createObjectURL(o));i(o=>({...o,image:[...o.image,...l]}))},C=async()=>{try{const n=await P.post("http://localhost:5001/api/products/add",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});m(),d(),alert("Product added successfully!")}catch(n){console.error("Error uploading product:",n),alert("Error uploading product.")}};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50",children:e.jsxs(N.div,{style:u,className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto m-4",children:[e.jsxs("div",{className:"sticky top-0 bg-white px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Add New Product"}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(A,{className:"w-6 h-6 text-gray-500"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(x,{label:"Product Name",name:"name",value:a.name,onChange:r,spring:s}),e.jsx(x,{label:"Price",name:"price",type:"number",value:a.price,onChange:r,spring:s}),e.jsx(x,{label:"Age Group",name:"ageGroup",value:a.ageGroup,onChange:r,spring:s}),e.jsx(x,{label:"Color",name:"color",value:a.color,onChange:r,spring:s}),e.jsx(x,{label:"Description",name:"description",type:"textarea",value:a.description,onChange:r,spring:s,className:"md:col-span-2"}),e.jsx(x,{label:"Items Included",name:"itemsIncluded",value:a.itemsIncluded,onChange:r,spring:s}),e.jsx(x,{label:"Features",name:"features",type:"textarea",value:a.features,onChange:r,spring:s}),e.jsx(x,{label:"Benefits",name:"benefits",type:"textarea",value:a.benefits,onChange:r,spring:s}),e.jsx(x,{label:"Quantity",name:"quantity",type:"number",value:a.quantity,onChange:r,spring:s})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Upload Images"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:f,className:"mt-2 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),e.jsx($,{images:a.image,onRemove:y,imageSpring:h}),e.jsxs(N.div,{style:b,className:"flex justify-end space-x-4 mt-6",children:[e.jsx("button",{onClick:d,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:C,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:from-blue-600 hover:to-purple-600 transition-colors",children:"Save Product"})]})]})]})})},V=()=>{const{products:d,error:m,fetchProducts:a}=c.useContext(L),[i,u]=c.useState(null),[s,h]=c.useState(null),[b,r]=c.useState(!1),[y,f]=c.useState(!1),[C,n]=c.useState(!1),[g,l]=c.useState(!0),[o,D]=c.useState(""),I=d.filter(t=>t.name.toLowerCase().includes(o.toLowerCase())),_=t=>{D(t.target.value)};c.useEffect(()=>{const t=setTimeout(()=>{l(!1)},1e3);return()=>clearTimeout(t)},[]);const z=()=>{l(!0),a().finally(()=>l(!1))},M=async()=>{try{l(!0),await P.delete("http://localhost:5001/api/products/remove",{params:{productId:i._id}}),await a(),r(!1),f("Item deleted successfully!"),setTimeout(()=>f(!1),3e3)}catch(t){console.error("Error deleting product:",t),alert("Failed to delete product. Please try again.")}finally{l(!1)}},T=t=>{h(t)},q=async()=>{try{l(!0),await P.put("http://localhost:5001/api/products/update",{productId:s._id,updatedProduct:s}),await a(),f("Product updated successfully!"),setTimeout(()=>f(!1),3e3),h(null)}catch(t){console.error("Error updating product:",t),alert("Failed to update product. Please try again.")}finally{l(!1)}},S=t=>{const{name:p,value:k}=t.target,R=p==="quantity"||p==="discount"?Number(k):k;h({...s,[p]:p==="bestSellers"?k==="true":R})};return e.jsxs("div",{className:"w-full mx-auto px-4 py-8 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h2",{className:"md:text-3xl font-semibold text-gray-800 animate-slide-in",children:"PRODUCT OVERSEE"}),e.jsxs("button",{className:"flex items-center gap-2 bg-blue-950 text-white px-4 py-2 rounded-lg button-hover ripple-effect",onClick:()=>n(!0),children:[e.jsx(U,{size:20}),e.jsx("span",{className:"text-sm md:text-base",children:"ADD PRODUCT"})]})]}),e.jsx("div",{className:"flex justify-end items-center mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by product name",value:o,onChange:_,className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),C&&e.jsx("div",{className:"modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"modal-content bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4",children:e.jsx(G,{onClose:()=>n(!1),onProductAdded:z})})}),m&&e.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 animate-fade-in",children:m}),y&&e.jsx("div",{className:"success-message fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg",children:y}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-lg rounded-lg hover-scale",children:e.jsxs("table",{className:"min-w-full table-auto border-collapse",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-500 to-blue-700 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 border-b text-left",children:"S.No"}),e.jsx("th",{className:"px-6 py-3 border-b text-left",children:"Name"}),e.jsx("th",{className:"px-6 py-3 border-b text-left",children:"Price"}),e.jsx("th",{className:"px-6 py-3 border-b text-left",children:"Age"}),e.jsx("th",{className:"px-6 py-3 border-b text-left",children:"Discount"}),e.jsx("th",{className:"px-6 py-3 border-b text-left",children:"Best Seller"}),e.jsx("th",{className:"px-6 py-3 border-b text-left",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 border-b text-left",children:"Actions"})]})}),e.jsx("tbody",{children:g?Array(5).fill(0).map((t,p)=>e.jsx("tr",{className:"shimmer",children:e.jsx("td",{colSpan:"8",className:"h-16"})},p)):I.length>0?I.map((t,p)=>e.jsxs("tr",{className:"table-row-animate hover:bg-gray-50 transition-all duration-200",children:[e.jsx("td",{className:"px-6 py-4 border-b",children:p+1}),e.jsx("td",{className:"px-6 py-4 border-b font-semibold",children:t.name}),e.jsxs("td",{className:"px-6 py-4 border-b text-green-500",children:["â‚¹",t.price]}),e.jsx("td",{className:"px-6 py-4 border-b text-center",children:t.ageGroup}),e.jsx("td",{className:"px-6 py-4 border-b text-red-500",children:s&&s._id===t._id?e.jsx("input",{type:"number",name:"discount",value:s.discount!==void 0?s.discount:"",onChange:S,className:"w-20 px-2 py-1 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}):`${t.discount||0}%`}),e.jsx("td",{className:"px-6 py-4 border-b text-center",children:s&&s._id===t._id?e.jsxs("select",{name:"bestSellers",value:s.bestSellers,onChange:S,className:"w-20 px-2 py-1 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:!0,children:"Yes"}),e.jsx("option",{value:!1,children:"No"})]}):e.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 rounded-full ${t.bestSellers?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:t.bestSellers?e.jsx(E,{size:14}):e.jsx(A,{size:14})})}),e.jsx("td",{className:`px-6 py-4 border-b text-center ${t.quantity<5?"bg-red-100 text-red-800":t.quantity<15?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"} font-medium`,children:s&&s._id===t._id?e.jsx("input",{type:"number",name:"quantity",value:s.quantity||"",onChange:S,className:"w-20 px-2 py-1 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}):t.quantity}),e.jsx("td",{className:"px-6 py-4 border-b",children:e.jsxs("div",{className:"flex gap-3",children:[s&&s._id===t._id?e.jsx("button",{onClick:q,className:"text-green-600 hover:text-green-800 button-hover",title:"Save",children:e.jsx(E,{size:20})}):e.jsx("button",{onClick:()=>T(t),className:"text-blue-600 hover:text-blue-800 button-hover",title:"Edit",children:e.jsx(F,{size:20})}),e.jsx("button",{onClick:()=>{u(t),r(!0)},className:"text-red-600 hover:text-red-800 button-hover",title:"Delete",children:e.jsx(Y,{size:20})})]})})]},t._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center px-4 py-8 text-gray-500",children:"No products available"})})})]})}),b&&e.jsx("div",{className:"modal-overlay fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"modal-content bg-white p-6 rounded-lg shadow-xl max-w-md mx-4 w-full",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Confirm Delete"}),e.jsxs("p",{className:"mb-6 text-gray-600",children:["Are you sure you want to delete this product?",e.jsx("span",{className:"block font-bold text-xl mt-2 text-gray-800",children:i.name})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 button-hover",children:"Cancel"}),e.jsx("button",{onClick:M,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 button-hover",children:"Delete"})]})]})})]})};export{V as default};
